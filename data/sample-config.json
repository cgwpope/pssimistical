{
    "tables": [
        {
            "columns": [
                {
                    "name": "name",
                    "type": "text"
                },
                {
                    "name": "id",
                    "type": "number"
                }
            ],
            "name": "patients"
        },
        {
            "columns": [
                {
                    "name": "Patient_Number",
                    "type": "number"
                },
                {
                    "name": "Date_Overidden",
                    "type": "text"
                }
            ],
            "name": "security_override_log"
        }
    ],
    "readers": {
        "pss_patients_export": {
            "type": "CSV",
            "readerProperties": {
                "linesToSkip": 2
            },
            "columns": [
                "name",
                "Sex",
                "Age",
                "Birthdate",
                "doctor_name",
                "id",
                "Health_Num",
                "City",
                "Address",
                "Phone_Number",
                "Status",
                "Last_Billed_date",
                "?"
            ]
        },
        "security_override_log_export": {
            "type": "txlog",
            "readerProperties": {
                "recordSeparator": "Security Override Log Entry"
            },
            "columns": [
                "Patient Number",
                "Overridden by user",
                "Date Overidden",
                "Overriders IPAddress",
                "Override Type"
            ]
        }
    },
    "inputs": [
        {
            "path": "data/patients.csv.txt",
            "table": "patients",
            "reader": "pss_patients_export"
        },
        {
            "path": "data/Transactions.txt",
            "table": "security_override_log",
            "reader": "security_override_log_export"
        }
    ],
    "query": "SELECT count(*), name INTO CSV(\"output.csv\", {headers:true}) FROM patients group by name"
}